/*******************************************************************************************************************************//**
 *
 * @file		DigitalOutputs.cpp
 * @brief		Descripcion del modulo
 * @date		12 jul. 2022
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include <05-SalidasDigitales/digital_outputs.h>

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** IMPLEMENTACION DE LOS METODODS DE LA CLASE
 **********************************************************************************************************************************/

DigitalOutputs::DigitalOutputs( uint8_t puerto , uint8_t bit , uint8_t modo , uint8_t actividad , uint8_t estado ):
					gpio( puerto , bit , modo , gpio::output , actividad )
{
	m_buffer = estado;
	SetDirOutputs( );
	g_CallbackList.push_back( this );
}

int8_t DigitalOutputs::set ( void )
{
	m_buffer = on ;
	return ok;
}

int8_t DigitalOutputs::clr ( void )
{
	m_buffer =  off ;
	return ok;
}


DigitalOutputs& DigitalOutputs::operator= ( uint8_t estado )
{
	m_buffer =  estado ;
	return *this;
}

void DigitalOutputs::callback ( void )
{
	if ( m_buffer )
		SetPin( );
	else
		ClrPin( );
}
